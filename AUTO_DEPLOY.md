# 🤖 全自動部署指南｜一鍵上線

**專案已推送到 GitHub，所有部署配置已就緒！**

---

## 🚀 方案一：Render.com (推薦 - 永久免費)

### 一鍵部署步驟

1. **訪問 Render Dashboard**

   👉 **[點擊這裡立即部署](https://dashboard.render.com/select-repo?type=blueprint)**

2. **連接 GitHub Repository**
   - 授權 Render 訪問你的 GitHub
   - 選擇 `32iterations/intergenerate-learning-AI-Matching-system`

3. **Render 自動偵測配置**
   - 系統會自動讀取 `render.yaml`
   - 所有配置已預先設定好

4. **設定環境變數** (重要！)
   在 Render Dashboard 設定：
   ```
   PEXELS_API_KEY = 3MIg8LdMhGoI049BwKKVmXHxp8alh7h6NSGHS8jALUqiNU4ImNLmdvTU
   NODE_ENV = production
   PORT = 3001
   ```

5. **點擊 "Apply"**
   - Render 開始自動建置和部署
   - 預計 5-10 分鐘完成

6. **獲取你的公開 URL！**
   ```
   https://hsinchu-intergen-app.onrender.com
   ```

### ✅ 完成後測試

訪問以下URL：
- **主頁**: https://your-app.onrender.com
- **API**: https://your-app.onrender.com/api/images?q=taiwan
- **管理端**: https://your-app.onrender.com/admin.html

---

## ⚡ 方案二：Railway (更快啟動)

### 一鍵部署

1. **訪問 Railway**

   👉 **[https://railway.app/new](https://railway.app/new)**

2. **Deploy from GitHub repo**
   - 選擇你的 repository
   - Railway 自動偵測 `railway.json`

3. **設定環境變數**
   ```
   PEXELS_API_KEY = 3MIg8LdMhGoI049BwKKVmXHxp8alh7h6NSGHS8jALUqiNU4ImNLmdvTU
   NODE_ENV = production
   PORT = 3001
   ```

4. **Deploy！**
   - 2-3 分鐘內完成
   - 獲得公開 URL

---

## 💨 方案三：Cloudflare Tunnel (5 分鐘臨時展示)

### 本地運行 + 外網公開

```bash
# 終端 1: 啟動伺服器
./scripts/start.sh

# 終端 2: 公開到外網
cloudflared tunnel --url http://localhost:3001
```

**立即獲得公開 URL！**（例如：https://random-words-1234.trycloudflare.com）

---

## 🐳 方案四：Docker (本地測試)

```bash
# 一鍵啟動
docker-compose up -d

# 訪問 http://localhost:3001
```

---

## 📋 環境變數說明

所有雲端部署都需要設定以下環境變數：

| 變數名稱 | 值 | 說明 |
|---------|-----|------|
| **PEXELS_API_KEY** | `3MIg8LdMhGoI049BwKKVmXHxp8alh7h6NSGHS8jALUqiNU4ImNLmdvTU` | Pexels 圖片 API |
| **NODE_ENV** | `production` | 執行環境 |
| **PORT** | `3001` | 伺服器端口 |

---

## ✅ 部署驗證

部署完成後，執行驗證：

```bash
# 本地測試
./scripts/deploy-check.sh http://localhost:3001

# 線上測試
./scripts/deploy-check.sh https://your-app.onrender.com
```

應該看到：
```
✅ API 端點正常 (HTTP 200)
✅ API 回應格式正確
   📸 回傳 6 張圖片
✅ 首頁載入正常
✅ 管理儀表板載入正常
✅ Puter.js 可訪問
```

---

## 🎯 AI 功能測試

部署完成後測試以下功能：

### 1. 圖片自動配圖
- 訪問主頁
- 點擊「🎨 自動配圖」
- 應顯示來自 Pexels 的圖片

### 2. Pitch Coach (Gemini 3 Pro)
- 在「AI Pitch Coach」區塊輸入：
  ```
  我們要推廣隔代共學，讓長者和孩子一起學習
  ```
- 選擇「中文 (30秒)」或「English (60秒)」
- 點擊「🤖 生成簡報稿」
- Gemini 3 Pro 應該會生成簡報內容

### 3. 樓層巡檢 AI
- 滾動到樓層平面圖區域
- 下拉選單選擇不同樓層
- 查看 AI 生成的場地建議

### 4. 管理儀表板
- 訪問 `/admin.html`
- 測試「🤖 AI Ops 巡檢重點」
- 應顯示基於今日場次的 AI 建議

---

## 🔧 常見問題

### Q1: Render 顯示 "Service Unavailable"
**A**: 免費方案有 15 分鐘無活動會休眠。
- 首次訪問需等待 30-60 秒喚醒
- 或使用 UptimeRobot 定期 ping

### Q2: Puter.js 未載入
**A**: 檢查網路是否允許訪問 `https://js.puter.com`
- 開啟瀏覽器 Console (F12)
- 確認沒有 CORS 或網路錯誤

### Q3: 圖片無法載入
**A**: 確認環境變數已正確設定
- 檢查 `PEXELS_API_KEY` 是否存在
- 測試 API: `https://your-app.onrender.com/api/images?q=test`

### Q4: Gemini 3 Pro 無法生成
**A**: 這是正常的，因為需要使用者互動
- Puter.js 需要使用者權限
- 首次使用會出現授權提示
- 同意後即可正常使用

---

## 📊 部署方案比較

| 方案 | 時間 | 成本 | 穩定性 | URL | 推薦場景 |
|------|------|------|--------|-----|---------|
| **Render** | 10 分鐘 | 免費 | ⭐⭐⭐⭐ | 永久 | 正式展示 |
| **Railway** | 5 分鐘 | 免費 | ⭐⭐⭐⭐⭐ | 永久 | 正式部署 |
| **Cloudflare** | 5 分鐘 | 免費 | ⭐⭐⭐ | 暫時 | 黑客松 Demo |
| **Docker** | 3 分鐘 | 免費 | ⭐⭐⭐⭐⭐ | 本地 | 開發測試 |

---

## 🎊 部署完成檢查清單

部署成功後，確認以下項目：

- [ ] 主頁可以訪問
- [ ] API 端點返回 JSON 資料
- [ ] 圖片可以載入（點擊自動配圖）
- [ ] Puter.js 腳本已載入（檢查 Console）
- [ ] Pitch Coach 可以點擊（AI 生成需使用者授權）
- [ ] 管理儀表板可以訪問
- [ ] 樓層巡檢 AI 有顯示
- [ ] 所有按鈕可以點擊
- [ ] 樣式正常渲染（非純文字）

---

## 🚀 下一步

部署完成後：

1. **分享你的 URL**
   ```
   https://your-app.onrender.com
   ```

2. **設定自訂網域** (選配)
   - Render/Railway 都支援自訂網域
   - 免費 SSL 憑證

3. **監控與優化**
   - 整合 Google Analytics
   - 設定 Sentry 錯誤追蹤
   - UptimeRobot 健康檢查

4. **持續改進**
   - 替換真實的 Spline 3D 場景
   - 新增 Rive 動畫檔案
   - 優化圖片載入速度

---

## 📞 需要協助？

- **快速啟動**: 閱讀 `QUICK_START.md`
- **完整指南**: 閱讀 `DEPLOYMENT.md`
- **測試報告**: 閱讀 `DEPLOYMENT_REPORT.md`
- **GitHub Issues**: https://github.com/32iterations/intergenerate-learning-AI-Matching-system/issues

---

**🎉 恭喜！你的 AI 媒合系統已經可以公開使用了！**

*Generated by Claude Code - https://claude.com/claude-code*
